<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menú - P&C Restobar</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='Styles.css') }}">
</head>
<body>

  <div class="barra-superior">
    <a href="{{ url_for('index') }}" class="back-button"> Volver</a>
    SABORES QUE TE INVITAN A QUEDARTE
  </div>

  <div class="fondo fondo-carta"> 
    <div class="menu-header">
      <h1>Nuestro Menú</h1>
      <p>Descubre nuestros deliciosos platos y bebidas</p>
    </div>

  
  
    {% if productos %}
      <div class="carta">
        {% set current_cat = None %}
        {% for producto in productos %}
          {% if current_cat != (producto[3] or '').lower() %}
            {% if not loop.first %}</div>{% endif %}
            <h2 style="width:100%; text-align:center; color:#713D2A; margin:20px 0 10px 0;">{{ (producto[3] or 'General') | title }}</h2>
            <div class="carta">
            {% set current_cat = (producto[3] or '').lower() %}
          {% endif %}
          <div class="producto">
            {% if producto[4] %}
              <img src="{{ producto[4] }}" alt="{{ producto[1] }}" onerror="this.src='{{ url_for('static', filename='default-food.png') }}'">
            {% else %}
              <img src="{{ url_for('static', filename='default-food.png') }}" alt="{{ producto[1] }}">
            {% endif %}
            <h3>{{ producto[1] }}</h3>
            {% if producto[3] %}
              <p class="descripcion">{{ producto[3] }}</p>
            {% endif %}
            <p class="precio">${{ "{:,.0f}".format(producto[2]) }}</p>
            <form method="POST" action="{{ url_for('cart_add', producto_id=producto[0]) }}" class="add-to-cart">
              <input type="number" name="qty" value="1" min="1" class="qty-input">
              <button type="submit" class="btn-primary">Agregar al carrito</button>
            </form>
          </div>
          {% if loop.last %}</div>{% endif %}
        {% endfor %}
      </div>
    {% else %}
      <div class="no-products">
        <p>No hay productos disponibles en este momento.</p>
        <p>¡Pronto tendremos nuestro menú listo!</p>
      </div>
    {% endif %}
  </div>

</body>
</html>
